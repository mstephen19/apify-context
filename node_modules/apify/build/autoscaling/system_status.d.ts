export default SystemStatus;
/**
 * Represents the current status of the system.
 */
export type SystemInfo = {
    /**
     *   If true, system is being overloaded.
     */
    isSystemIdle: boolean;
    /**
     *   Memory
     */
    memInfo: {
        [x: string]: any;
    };
    eventLoopInfo: {
        [x: string]: any;
    };
    cpuInfo: {
        [x: string]: any;
    };
};
export type SystemStatusOptions = {
    /**
     * Defines max age of snapshots used in the
     * {@link SystemStatusgetCurrentStatus } measurement.
     */
    currentHistorySecs?: number | undefined;
    /**
     * Sets the maximum ratio of overloaded snapshots in a memory sample.
     * If the sample exceeds this ratio, the system will be overloaded.
     */
    maxMemoryOverloadedRatio?: number | undefined;
    /**
     * Sets the maximum ratio of overloaded snapshots in an event loop sample.
     * If the sample exceeds this ratio, the system will be overloaded.
     */
    maxEventLoopOverloadedRatio?: number | undefined;
    /**
     * Sets the maximum ratio of overloaded snapshots in a CPU sample.
     * If the sample exceeds this ratio, the system will be overloaded.
     */
    maxCpuOverloadedRatio?: number | undefined;
    /**
     * Sets the maximum ratio of overloaded snapshots in a Client sample.
     * If the sample exceeds this ratio, the system will be overloaded.
     */
    maxClientOverloadedRatio?: number | undefined;
    /**
     * The `Snapshotter` instance to be queried for `SystemStatus`.
     */
    snapshotter?: Snapshotter | undefined;
};
/**
 * Represents the current status of the system.
 *
 * @typedef SystemInfo
 * @property {boolean} isSystemIdle
 *   If true, system is being overloaded.
 * @property {Object<string, *>} memInfo
 *   Memory
 * @property {Object<string, *>} eventLoopInfo
 * @property {Object<string, *>} cpuInfo
 */
/**
 * @typedef SystemStatusOptions
 * @property {number} [currentHistorySecs=5]
 *   Defines max age of snapshots used in the
 *   {@link SystemStatus#getCurrentStatus} measurement.
 * @property {number} [maxMemoryOverloadedRatio=0.2]
 *   Sets the maximum ratio of overloaded snapshots in a memory sample.
 *   If the sample exceeds this ratio, the system will be overloaded.
 * @property {number} [maxEventLoopOverloadedRatio=0.6]
 *   Sets the maximum ratio of overloaded snapshots in an event loop sample.
 *   If the sample exceeds this ratio, the system will be overloaded.
 * @property {number} [maxCpuOverloadedRatio=0.4]
 *   Sets the maximum ratio of overloaded snapshots in a CPU sample.
 *   If the sample exceeds this ratio, the system will be overloaded.
 * @property {number} [maxClientOverloadedRatio=0.3]
 *   Sets the maximum ratio of overloaded snapshots in a Client sample.
 *   If the sample exceeds this ratio, the system will be overloaded.
 * @property {Snapshotter} [snapshotter]
 *   The `Snapshotter` instance to be queried for `SystemStatus`.
 */
/**
 * Provides a simple interface to reading system status from a {@link Snapshotter} instance.
 * It only exposes two functions {@link SystemStatus#getCurrentStatus}
 * and {@link SystemStatus#getHistoricalStatus}.
 * The system status is calculated using a weighted average of overloaded
 * messages in the snapshots, with the weights being the time intervals
 * between the snapshots. Each resource is calculated separately
 * and the system is overloaded whenever at least one resource is overloaded.
 * The class is used by the {@link AutoscaledPool} class.
 *
 * {@link SystemStatus#getCurrentStatus}
 * returns a boolean that represents the current status of the system.
 * The length of the current timeframe in seconds is configurable
 * by the `currentHistorySecs` option and represents the max age
 * of snapshots to be considered for the calculation.
 *
 * {@link SystemStatus#getHistoricalStatus}
 * returns a boolean that represents the long-term status
 * of the system. It considers the full snapshot history available
 * in the {@link Snapshotter} instance.
 */
declare class SystemStatus {
    /**
     * @param {SystemStatusOptions} [options] All `SystemStatus` configuration options.
     */
    constructor(options?: SystemStatusOptions | undefined);
    currentHistorySecs: number;
    maxMemoryOverloadedRatio: number;
    maxEventLoopOverloadedRatio: number;
    maxCpuOverloadedRatio: number;
    maxClientOverloadedRatio: number;
    snapshotter: Snapshotter;
    /**
     * Returns an {@link SystemInfo} object with the following structure:
     *
     * ```javascript
     * {
     *     isSystemIdle: Boolean,
     *     memInfo: Object,
     *     eventLoopInfo: Object,
     *     cpuInfo: Object
     * }
     * ```
     *
     * Where the `isSystemIdle` property is set to `false` if the system
     * has been overloaded in the last `options.currentHistorySecs` seconds,
     * and `true` otherwise.
     * @return {SystemInfo}
     */
    getCurrentStatus(): SystemInfo;
    /**
     * Returns an {@link SystemInfo} object with the following structure:
     *
     * ```javascript
     * {
     *     isSystemIdle: Boolean,
     *     memInfo: Object,
     *     eventLoopInfo: Object,
     *     cpuInfo: Object
     * }
     * ```
     *
     * Where the `isSystemIdle` property is set to `false` if the system
     * has been overloaded in the full history of the {@link Snapshotter}
     * (which is configurable in the {@link Snapshotter}) and `true` otherwise.
     * @return {SystemInfo}
     */
    getHistoricalStatus(): SystemInfo;
    /**
     * Returns a system status object.
     *
     * @param {number} [sampleDurationMillis]
     * @return {SystemInfo}
     * @ignore
     * @protected
     * @internal
     */
    protected _isSystemIdle(sampleDurationMillis?: number | undefined): SystemInfo;
    /**
     * Returns an object with an isOverloaded property set to true
     * if the memory has been overloaded in the last sampleDurationMillis.
     *
     * @param {number} sampleDurationMillis
     * @return {object}
     * @ignore
     * @protected
     * @internal
     */
    protected _isMemoryOverloaded(sampleDurationMillis: number): object;
    /**
     * Returns an object with an isOverloaded property set to true
     * if the event loop has been overloaded in the last sampleDurationMillis.
     *
     * @param {number} sampleDurationMillis
     * @return {object}
     * @ignore
     * @protected
     * @internal
     */
    protected _isEventLoopOverloaded(sampleDurationMillis: number): object;
    /**
     * Returns an object with an isOverloaded property set to true
     * if the CPU has been overloaded in the last sampleDurationMillis.
     *
     * @param {number} sampleDurationMillis
     * @return {object}
     * @ignore
     * @protected
     * @internal
     */
    protected _isCpuOverloaded(sampleDurationMillis: number): object;
    /**
     * Returns an object with an isOverloaded property set to true
     * if the client has been overloaded in the last sampleDurationMillis.
     * @param {number} sampleDurationMillis
     * @return {{isOverloaded: boolean, maxOverloadedRatio: number, actualRatio: number}}
     * @ignore
     * @protected
     * @internal
     */
    protected _isClientOverloaded(sampleDurationMillis: number): {
        isOverloaded: boolean;
        maxOverloadedRatio: number;
        actualRatio: number;
    };
    /**
     * Returns an object with sample information and an isOverloaded property
     * set to true if at least the ratio of snapshots in the sample are overloaded.
     *
     * @param {Array<*>} sample
     * @param {number} ratio
     * @return {object}
     * @ignore
     * @protected
     * @internal
     */
    protected _isSampleOverloaded(sample: Array<any>, ratio: number): object;
}
import Snapshotter from "./snapshotter";
//# sourceMappingURL=system_status.d.ts.map